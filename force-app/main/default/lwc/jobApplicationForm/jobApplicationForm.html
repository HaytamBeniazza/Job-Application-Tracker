<template>
    <div class="slds-card">
        <lightning-card title="New Job Application" icon-name="standard:opportunity">
            <div class="slds-card__body slds-card__body_inner">
                <lightning-spinner if:true={isLoading} alternative-text="Creating job application" size="small"></lightning-spinner>
                
                <form class="slds-form slds-form_stacked">
                    <lightning-input 
                        label="Company" 
                        name="company" 
                        value={jobApplication.company}
                        onchange={handleInputChange}
                        required>
                    </lightning-input>
                    
                    <lightning-input 
                        label="Position" 
                        name="position" 
                        value={jobApplication.position}
                        onchange={handleInputChange}
                        required>
                    </lightning-input>
                    
                    <lightning-input 
                        type="date" 
                        label="Application Date" 
                        name="applicationDate" 
                        value={jobApplication.applicationDate}
                        onchange={handleInputChange}
                        required>
                    </lightning-input>
                    
                    <lightning-input 
                        label="Contact Name" 
                        name="contactName" 
                        value={jobApplication.contactName}
                        onchange={handleInputChange}>
                    </lightning-input>
                    
                    <lightning-input 
                        type="email" 
                        label="Contact Email" 
                        name="contactEmail" 
                        value={jobApplication.contactEmail}
                        onchange={handleInputChange}>
                    </lightning-input>
                    
                    <div class="slds-m-top_medium">
                        <lightning-button 
                            onclick={handleCancel} 
                            label="Cancel" 
                            class="slds-m-right_small">
                        </lightning-button>
                        <lightning-button 
                            variant="brand" 
                            type="submit" 
                            name="save"
                            label="Save">
                        </lightning-button>
                    </div>
                </form>
            </div>
        </lightning-card>
        
        <!-- Document Section - Only visible when editing an existing record -->
        <template if:true={recordId}>
            <div class="slds-m-top_medium slds-border_top">
                <div class="slds-p-top_medium">
                    <h3 class="slds-text-heading_small slds-m-bottom_small">Application Documents</h3>
                    <c-document-manager record-id={recordId}></c-document-manager>
                </div>
            </div>
        </template>
    </div>
</template> 